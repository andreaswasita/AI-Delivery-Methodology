<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Value Analysis Chatbot - Interactive Assistant</title>
    <meta name="description" content="Interactive AI chatbot for value analysis, use case prioritization, and ROI assessment">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/chatbot-styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>ü§ñ AI Value Analysis Chatbot</h1>
            <p class="subtitle">Your interactive assistant for AI project value analysis</p>
        </div>
    </header>

    <nav>
        <div class="container">
            <a href="index.html">‚Üê Back to Calculators</a>
        </div>
    </nav>

    <main class="chatbot-container">
        <div class="chatbot-header">
            <div class="bot-avatar">ü§ñ</div>
            <div class="bot-info">
                <h2>Value Analysis Assistant</h2>
                <p class="status">
                    <span class="status-indicator"></span>
                    Online - Ready to help
                </p>
            </div>
            <div class="header-actions">
                <button id="apiKeyBtn" class="icon-btn" title="AI Provider Settings">
                    ü§ñ
                </button>
                <button id="resetBtn" class="reset-btn" title="Start new analysis">
                    üîÑ Reset
                </button>
            </div>
        </div>

        <div id="chatMessages" class="chat-messages">
            <!-- Messages will be added here dynamically -->
        </div>

        <div class="chat-input-container">
            <div id="quickReplies" class="quick-replies">
                <!-- Quick reply buttons will be added here -->
            </div>
            <div class="input-wrapper">
                <input 
                    type="text" 
                    id="userInput" 
                    placeholder="Type your response..."
                    autocomplete="off"
                >
                <button id="sendBtn" class="send-btn">
                    <span>Send</span>
                    <span class="send-icon">‚û§</span>
                </button>
            </div>
        </div>

        <!-- Summary Panel (hidden initially) -->
        <div id="summaryPanel" class="summary-panel" style="display: none;">
            <div class="summary-header">
                <h3>üìä Analysis Summary</h3>
                <button id="closeSummary" class="close-summary">‚úï</button>
            </div>
            <div id="summaryContent" class="summary-content">
                <!-- Summary will be populated here -->
            </div>
            <div class="summary-actions">
                <button id="exportJson" class="btn btn-secondary">üì• Export JSON</button>
                <button id="exportReport" class="btn btn-primary">üìÑ Download Report</button>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 AI Delivery Methodology | 
                <a href="https://github.com/andreaswasita/AI-Delivery-Methodology">GitHub Repository</a> |
                <a href="roi-calculator.html">ROI Calculator</a>
            </p>
            <p class="privacy-note">üîí Privacy: All calculations run in your browser. No data is sent to any server.</p>
        </div>
    </footer>

    <script>
        // Pre-initialization check
        console.log('üîç Pre-check: Document ready state:', document.readyState);
        console.log('üîç Pre-check: Script loading...');
    </script>
    <!-- Optional: Load local config file (only exists on your local machine, not in git) -->
    <script src="js/config.local.js" onerror="console.log('‚ÑπÔ∏è No local config file found (this is normal)')"></script>
    <script src="js/value-analysis-chatbot.js"></script>
    <script>
        // Post-initialization check
        console.log('üì¶ Script loaded');
        console.log('üîç Post-check: ValueAnalysisChatbot class:', typeof ValueAnalysisChatbot);
        console.log('üîç Post-check: window.chatbot instance:', typeof window.chatbot);
        console.log('üîç Post-check: Local config:', window.CHATBOT_CONFIG ? 'Loaded ‚úÖ' : 'Not found (users will enter keys via UI)');
        
        // Force initialization after a short delay if needed
        setTimeout(() => {
            if (typeof window.chatbot === 'undefined') {
                console.warn('‚ö†Ô∏è Chatbot not initialized, forcing initialization...');
                if (typeof ValueAnalysisChatbot !== 'undefined') {
                    try {
                        window.chatbot = new ValueAnalysisChatbot();
                        console.log('‚úÖ Force initialization successful');
                    } catch (error) {
                        console.error('‚ùå Force initialization failed:', error);
                        alert('Chatbot failed to initialize. Please check console for errors.');
                    }
                } else {
                    console.error('‚ùå ValueAnalysisChatbot class not found!');
                }
            } else {
                console.log('‚úÖ Chatbot already initialized');
            }
        }, 500);
    </script>
</body>
</html>
