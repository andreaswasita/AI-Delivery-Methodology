<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Project Team Sizing Calculator - AI Delivery Methodology</title>
    <meta name="description" content="Determine optimal team composition and size based on project scope, complexity, and timeline">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .calculator-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .input-section, .results-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-group small {
            display: block;
            color: #666;
            margin-top: 0.25rem;
            font-size: 0.875rem;
        }

        .calculate-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .result-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
            color: white;
        }

        .result-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            color: white;
        }

        .result-subtext {
            font-size: 0.85rem;
            opacity: 0.8;
            color: white;
        }

        .team-breakdown {
            margin-top: 2rem;
        }

        .role-card {
            background: #f8f9fa;
            padding: 1.25rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
        }

        .role-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .role-title {
            font-weight: 600;
            color: #333;
            font-size: 1.1rem;
        }

        .role-count {
            font-weight: 700;
            color: #667eea;
            font-size: 1.2rem;
        }

        .role-details {
            color: #666;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .role-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .skill-tag {
            background: #667eea;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .cost-breakdown {
            margin-top: 2rem;
            background: #fff3cd;
            padding: 1.5rem;
            border-radius: 10px;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .cost-item:last-child {
            border-bottom: none;
            font-weight: 700;
            padding-top: 1rem;
            margin-top: 0.5rem;
            border-top: 2px solid #333;
        }

        .export-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .export-btn {
            flex: 1;
            padding: 0.75rem;
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .export-btn:hover {
            background: #667eea;
            color: white;
        }

        .recommendations {
            background: #e7f3ff;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 2rem;
        }

        .recommendations h3 {
            color: #0066cc;
            margin-bottom: 1rem;
        }

        .recommendations ul {
            list-style: none;
            padding: 0;
        }

        .recommendations li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .recommendations li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #0066cc;
            font-weight: bold;
        }

        .allocation-slider {
            margin: 0.75rem 0;
        }

        .allocation-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .allocation-value {
            font-weight: 600;
            color: #667eea;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        .maturity-info {
            background: #fff3cd;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: #856404;
            display: none;
        }

        .complexity-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .complexity-xs { background: #d4edda; color: #155724; }
        .complexity-sm { background: #cce5ff; color: #004085; }
        .complexity-md { background: #fff3cd; color: #856404; }
        .complexity-lg { background: #f8d7da; color: #721c24; }
        .complexity-xl { background: #d6d8db; color: #1b1e21; }

        @media (max-width: 968px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>üë• AI Project Team Sizing Calculator</h1>
            <p class="subtitle">Industry-specific team sizing with AI maturity assessment and complexity t-shirt sizing</p>
        </div>
    </header>

    <nav>
        <div class="container">
            <a href="index.html">‚Üê Back to Calculators</a>
        </div>
    </nav>

    <div class="calculator-container">
        <div class="calculator-grid">
            <!-- Input Section -->
            <div class="input-section">
                <h2>Project Inputs</h2>
                
                <div class="input-group">
                    <label for="projectName">Project Name</label>
                    <input type="text" id="projectName" placeholder="e.g., Customer Intelligence Platform">
                    <small>Name your project for the report</small>
                </div>

                <div class="input-group">
                    <label for="industry">Industry</label>
                    <select id="industry" onchange="updateUseCases()">
                        <option value="">Select Industry</option>
                        <option value="financial">Financial Services</option>
                        <option value="retail">Retail & Consumer Goods</option>
                        <option value="energy">Energy & Mining</option>
                        <option value="defense">Defense & Security</option>
                        <option value="public">Public Sector</option>
                        <option value="generic">Generic / Other</option>
                    </select>
                    <small>Industry affects complexity patterns and team composition</small>
                </div>

                <div class="input-group" id="useCaseGroup" style="display: none;">
                    <label for="useCase">Common Use Case Template</label>
                    <select id="useCase" onchange="loadUseCaseTemplate()">
                        <option value="">Select a template or configure manually</option>
                    </select>
                    <small>Auto-populate based on proven industry patterns</small>
                </div>

                <div class="input-group">
                    <label for="aiMaturity">Organization AI Maturity Level</label>
                    <select id="aiMaturity" onchange="updateMaturityRecommendations()">
                        <option value="initial">Level 1: Initial - No AI experience, exploring possibilities</option>
                        <option value="developing" selected>Level 2: Developing - First AI projects, building capabilities</option>
                        <option value="defined">Level 3: Defined - Established AI practice, multiple projects</option>
                        <option value="managed">Level 4: Managed - Mature MLOps, AI CoE established</option>
                        <option value="optimizing">Level 5: Optimizing - AI-driven organization, continuous innovation</option>
                    </select>
                    <small>Maturity level affects team structure and support needs</small>
                </div>

                <div class="input-group">
                    <label for="projectPhase">Project Phase</label>
                    <select id="projectPhase" onchange="updateDefaults()">
                        <option value="discovery">Discovery & Planning (2-3 months)</option>
                        <option value="mvp" selected>MVP / Proof of Concept (3-6 months)</option>
                        <option value="pilot">Pilot / Limited Production (6-9 months)</option>
                        <option value="production">Full Production (9-18 months)</option>
                        <option value="enterprise">Enterprise Scale (18+ months)</option>
                    </select>
                    <small>Select the phase to get recommended team sizes</small>
                </div>

                <div class="input-group">
                    <label for="projectComplexity">Project Complexity (T-Shirt Size)</label>
                    <select id="projectComplexity" onchange="updateDefaults()">
                        <option value="low">XS - Simple Analytics/Dashboard (2-4 weeks)</option>
                        <option value="medium" selected>S/M - Document AI, Basic Chatbot, Classification (2-4 months)</option>
                        <option value="high">L - Computer Vision, NLP, Multi-Model (4-8 months)</option>
                        <option value="veryHigh">XL - Real-time AI, Platform, Multi-tenant (8-18 months)</option>
                    </select>
                    <small>T-shirt sizing based on industry benchmarks</small>
                </div>

                <div class="input-group">
                    <label for="projectDuration">Project Duration (months)</label>
                    <input type="number" id="projectDuration" value="6" min="1" max="36">
                    <small>Total project timeline in months</small>
                </div>

                <div class="input-group">
                    <label for="teamModel">Team Model</label>
                    <select id="teamModel">
                        <option value="dedicated">Dedicated Full-Time Team</option>
                        <option value="hybrid" selected>Hybrid (Mix of FT and PT)</option>
                        <option value="parttime">Part-Time / Shared Resources</option>
                    </select>
                    <small>How team members will be allocated</small>
                </div>

                <div class="input-group">
                    <label for="includeDataTeam">
                        <input type="checkbox" id="includeDataTeam" checked style="width: auto; margin-right: 0.5rem;">
                        Include Data Engineering Team
                    </label>
                    <small>Data pipeline, ETL, and data quality roles</small>
                </div>

                <div class="input-group">
                    <label for="includeMLOps">
                        <input type="checkbox" id="includeMLOps" checked style="width: auto; margin-right: 0.5rem;">
                        Include MLOps/DevOps Resources
                    </label>
                    <small>CI/CD, model deployment, and monitoring</small>
                </div>

                <div class="input-group">
                    <label for="avgRate">Average Daily Rate (USD)</label>
                    <input type="number" id="avgRate" value="1200" min="0" step="50">
                    <small>Average blended rate per person per day</small>
                </div>

                <div class="input-group">
                    <label>
                        <input type="checkbox" id="customAllocations" onchange="toggleAllocations()" style="width: auto; margin-right: 0.5rem;">
                        Customize Role Allocations (Part-Time)
                    </label>
                    <small>Adjust FTE percentage per role (e.g., Product Owner at 50%)</small>
                </div>

                <div id="allocationControls" style="display: none; background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <h4 style="margin-top: 0; color: #333; font-size: 0.95rem;">Role Allocations (% FTE)</h4>
                    
                    <div class="allocation-slider">
                        <div class="allocation-label">
                            <span>Product Manager</span>
                            <span class="allocation-value"><span id="pmAllocationValue">100</span>%</span>
                        </div>
                        <input type="range" min="10" max="100" value="100" step="5" class="slider" id="pmAllocation">
                    </div>

                    <div class="allocation-slider">
                        <div class="allocation-label">
                            <span>Solution Architect</span>
                            <span class="allocation-value"><span id="architectAllocationValue">100</span>%</span>
                        </div>
                        <input type="range" min="10" max="100" value="100" step="5" class="slider" id="architectAllocation">
                    </div>

                    <div class="allocation-slider">
                        <div class="allocation-label">
                            <span>ML Engineer / Data Scientist</span>
                            <span class="allocation-value"><span id="mlAllocationValue">100</span>%</span>
                        </div>
                        <input type="range" min="10" max="100" value="100" step="5" class="slider" id="mlAllocation">
                    </div>

                    <div class="allocation-slider">
                        <div class="allocation-label">
                            <span>Data Engineer</span>
                            <span class="allocation-value"><span id="dataAllocationValue">100</span>%</span>
                        </div>
                        <input type="range" min="10" max="100" value="100" step="5" class="slider" id="dataAllocation">
                    </div>

                    <div class="allocation-slider">
                        <div class="allocation-label">
                            <span>Software Engineer</span>
                            <span class="allocation-value"><span id="devAllocationValue">100</span>%</span>
                        </div>
                        <input type="range" min="10" max="100" value="100" step="5" class="slider" id="devAllocation">
                    </div>

                    <div class="allocation-slider">
                        <div class="allocation-label">
                            <span>QA Engineer</span>
                            <span class="allocation-value"><span id="qaAllocationValue">50</span>%</span>
                        </div>
                        <input type="range" min="10" max="100" value="50" step="5" class="slider" id="qaAllocation">
                    </div>

                    <div class="allocation-slider">
                        <div class="allocation-label">
                            <span>MLOps / DevOps Engineer</span>
                            <span class="allocation-value"><span id="devopsAllocationValue">75</span>%</span>
                        </div>
                        <input type="range" min="10" max="100" value="75" step="5" class="slider" id="devopsAllocation">
                    </div>
                </div>

                <button class="calculate-btn" onclick="calculateTeam()">üë• Calculate Team Size</button>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="resultsSection">
                <h2>Team Composition</h2>
                
                <div class="result-card">
                    <div class="result-label">Recommended Team Size</div>
                    <div class="result-value" id="totalTeam">-</div>
                    <div class="result-subtext" id="teamSubtext">Calculate to see results</div>
                </div>

                <div class="result-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="result-label">Estimated Budget</div>
                    <div class="result-value" id="totalBudget">-</div>
                    <div class="result-subtext" id="budgetSubtext">-</div>
                </div>

                <div class="team-breakdown" id="teamBreakdown" style="display: none;">
                    <h3>Team Breakdown by Role</h3>
                    <!-- Roles will be inserted here by JavaScript -->
                </div>

                <div class="recommendations" id="recommendations" style="display: none;">
                    <h3>üí° Recommendations</h3>
                    <ul id="recommendationsList">
                        <!-- Recommendations will be inserted here -->
                    </ul>
                </div>

                <div class="cost-breakdown" id="costBreakdown" style="display: none;">
                    <h3>üí∞ Cost Breakdown</h3>
                    <!-- Cost items will be inserted here -->
                </div>

                <div class="export-buttons" style="display: none;" id="exportButtons">
                    <button class="export-btn" onclick="exportToJSON()">üì• Export JSON</button>
                    <button class="export-btn" onclick="copyToClipboard()">üìã Copy Summary</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2026 AI Delivery Methodology | Part of Microsoft AI Frontier</p>
        </div>
    </footer>

    <script>
        // Industry-specific use case templates
        const industryUseCases = {
            financial: [
                { id: 'fin-chatbot', name: 'Virtual Banking Assistant', complexity: 'medium', duration: 4, phase: 'mvp', description: 'Customer service chatbot for banking' },
                { id: 'fin-fraud', name: 'Fraud Detection System', complexity: 'high', duration: 6, phase: 'pilot', description: 'Real-time transaction monitoring' },
                { id: 'fin-churn', name: 'Customer Churn Prevention', complexity: 'medium', duration: 5, phase: 'mvp', description: 'Predictive ML for retention' },
                { id: 'fin-credit', name: 'Credit Risk Assessment', complexity: 'high', duration: 8, phase: 'production', description: 'Automated underwriting ML models' },
                { id: 'fin-aml', name: 'Anti-Money Laundering', complexity: 'veryHigh', duration: 12, phase: 'production', description: 'Transaction monitoring and compliance' },
                { id: 'fin-robo', name: 'Robo-Advisor Platform', complexity: 'high', duration: 9, phase: 'production', description: 'Automated investment advisory' }
            ],
            retail: [
                { id: 'retail-demand', name: 'Demand Forecasting', complexity: 'medium', duration: 4, phase: 'mvp', description: 'ML-based inventory optimization' },
                { id: 'retail-personalization', name: 'Product Recommendations', complexity: 'medium', duration: 5, phase: 'pilot', description: 'Personalized shopping experience' },
                { id: 'retail-price', name: 'Dynamic Pricing Optimization', complexity: 'high', duration: 6, phase: 'pilot', description: 'Real-time price optimization' },
                { id: 'retail-vision', name: 'Visual Search & Recognition', complexity: 'veryHigh', duration: 8, phase: 'production', description: 'Computer vision for product search' },
                { id: 'retail-sentiment', name: 'Customer Sentiment Analysis', complexity: 'low', duration: 3, phase: 'mvp', description: 'Social media and review analysis' }
            ],
            energy: [
                { id: 'energy-predictive', name: 'Predictive Maintenance', complexity: 'high', duration: 7, phase: 'pilot', description: 'Equipment failure prediction' },
                { id: 'energy-demand', name: 'Energy Demand Forecasting', complexity: 'medium', duration: 5, phase: 'mvp', description: 'Load prediction and optimization' },
                { id: 'energy-exploration', name: 'Geological Data Analysis', complexity: 'veryHigh', duration: 10, phase: 'production', description: 'AI for resource exploration' },
                { id: 'energy-safety', name: 'Safety Incident Prevention', complexity: 'high', duration: 6, phase: 'pilot', description: 'Computer vision for safety monitoring' },
                { id: 'energy-grid', name: 'Smart Grid Optimization', complexity: 'veryHigh', duration: 12, phase: 'enterprise', description: 'Real-time grid management' }
            ],
            defense: [
                { id: 'defense-intel', name: 'Intelligence Analysis', complexity: 'veryHigh', duration: 12, phase: 'production', description: 'Multi-source intelligence processing' },
                { id: 'defense-cyber', name: 'Cyber Threat Detection', complexity: 'high', duration: 8, phase: 'pilot', description: 'ML-based threat hunting' },
                { id: 'defense-logistics', name: 'Logistics Optimization', complexity: 'high', duration: 7, phase: 'pilot', description: 'Supply chain AI optimization' },
                { id: 'defense-predictive', name: 'Predictive Maintenance', complexity: 'high', duration: 6, phase: 'pilot', description: 'Equipment and fleet maintenance' },
                { id: 'defense-surveillance', name: 'Surveillance Analysis', complexity: 'veryHigh', duration: 10, phase: 'production', description: 'Computer vision for monitoring' }
            ],
            public: [
                { id: 'public-citizen', name: 'Citizen Services Chatbot', complexity: 'medium', duration: 4, phase: 'mvp', description: 'AI assistant for government services' },
                { id: 'public-doc', name: 'Document Intelligence', complexity: 'medium', duration: 5, phase: 'pilot', description: 'Automated document processing' },
                { id: 'public-fraud', name: 'Benefits Fraud Detection', complexity: 'high', duration: 6, phase: 'pilot', description: 'ML for fraud prevention' },
                { id: 'public-traffic', name: 'Traffic Management', complexity: 'high', duration: 7, phase: 'production', description: 'AI-powered traffic optimization' },
                { id: 'public-health', name: 'Public Health Analytics', complexity: 'high', duration: 8, phase: 'production', description: 'Predictive health monitoring' }
            ],
            generic: [
                { id: 'gen-chatbot', name: 'Custom Chatbot', complexity: 'medium', duration: 4, phase: 'mvp', description: 'Generic conversational AI' },
                { id: 'gen-analytics', name: 'Advanced Analytics Platform', complexity: 'medium', duration: 5, phase: 'pilot', description: 'ML-powered insights' },
                { id: 'gen-automation', name: 'Process Automation', complexity: 'high', duration: 6, phase: 'pilot', description: 'Intelligent process automation' },
                { id: 'gen-vision', name: 'Computer Vision Solution', complexity: 'veryHigh', duration: 8, phase: 'production', description: 'Custom vision AI' }
            ]
        };

        // AI Maturity level impacts
        const maturityImpact = {
            initial: {
                multiplier: 1.4,
                description: 'Additional support needed for capability building',
                recommendations: [
                    'Include AI champions and change management resources',
                    'Plan for extensive training and upskilling',
                    'Consider external AI consultants for guidance',
                    'Start with simpler use cases to build confidence',
                    'Invest in data governance foundation'
                ]
            },
            developing: {
                multiplier: 1.2,
                description: 'Some additional expertise needed',
                recommendations: [
                    'Bring in experienced ML engineers to mentor team',
                    'Establish MLOps practices early',
                    'Create knowledge sharing and documentation practices',
                    'Invest in data quality and governance',
                    'Build repeatable templates and patterns'
                ]
            },
            defined: {
                multiplier: 1.0,
                description: 'Standard team composition',
                recommendations: [
                    'Leverage existing AI patterns and frameworks',
                    'Focus on scaling best practices',
                    'Continue investing in team development',
                    'Standardize deployment and monitoring'
                ]
            },
            managed: {
                multiplier: 0.9,
                description: 'Efficient delivery with established practices',
                recommendations: [
                    'Optimize team for efficiency',
                    'Leverage reusable components and platforms',
                    'Focus on advanced use cases',
                    'Drive innovation and experimentation'
                ]
            },
            optimizing: {
                multiplier: 0.8,
                description: 'Highly efficient with mature capabilities',
                recommendations: [
                    'Smaller core teams with platform leverage',
                    'Focus on cutting-edge AI capabilities',
                    'Drive industry leadership',
                    'Optimize for continuous deployment'
                ]
            }
        };

        // Update use cases dropdown based on industry
        function updateUseCases() {
            const industry = document.getElementById('industry').value;
            const useCaseGroup = document.getElementById('useCaseGroup');
            const useCaseSelect = document.getElementById('useCase');
            
            if (industry && industry !== '') {
                useCaseGroup.style.display = 'block';
                useCaseSelect.innerHTML = '<option value="">Select a template or configure manually</option>';
                
                const cases = industryUseCases[industry] || [];
                cases.forEach(useCase => {
                    const option = document.createElement('option');
                    option.value = useCase.id;
                    option.textContent = useCase.name;
                    option.dataset.complexity = useCase.complexity;
                    option.dataset.duration = useCase.duration;
                    option.dataset.phase = useCase.phase;
                    option.dataset.description = useCase.description;
                    useCaseSelect.appendChild(option);
                });
            } else {
                useCaseGroup.style.display = 'none';
            }
        }

        // Load use case template
        function loadUseCaseTemplate() {
            const useCaseSelect = document.getElementById('useCase');
            const selectedOption = useCaseSelect.options[useCaseSelect.selectedIndex];
            
            if (selectedOption.value) {
                document.getElementById('projectName').value = selectedOption.textContent;
                document.getElementById('projectComplexity').value = selectedOption.dataset.complexity;
                document.getElementById('projectDuration').value = selectedOption.dataset.duration;
                document.getElementById('projectPhase').value = selectedOption.dataset.phase;
                
                // Show a notification
                const notification = document.createElement('div');
                notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #4CAF50; color: white; padding: 1rem 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000; animation: slideIn 0.3s ease;';
                notification.innerHTML = `‚úì Template loaded: ${selectedOption.textContent}<br><small>${selectedOption.dataset.description}</small>`;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
        }

        // Update maturity recommendations display
        function updateMaturityRecommendations() {
            const maturity = document.getElementById('aiMaturity').value;
            const impact = maturityImpact[maturity];
            
            // Store for later use in recommendations
            window.maturityContext = {
                level: maturity,
                multiplier: impact.multiplier,
                description: impact.description,
                recommendations: impact.recommendations
            };
        }

        // Team sizing templates based on phase and complexity
        const teamTemplates = {
            discovery: {
                low: { base: 3, ml: 1, data: 1, dev: 0, qa: 0, devops: 0, pm: 1, architect: 0 },
                medium: { base: 4, ml: 2, data: 1, dev: 0, qa: 0, devops: 0, pm: 1, architect: 0 },
                high: { base: 5, ml: 2, data: 1, dev: 0, qa: 0, devops: 0, pm: 1, architect: 1 },
                veryHigh: { base: 6, ml: 3, data: 1, dev: 0, qa: 0, devops: 0, pm: 1, architect: 1 }
            },
            mvp: {
                low: { base: 5, ml: 2, data: 1, dev: 1, qa: 1, devops: 0, pm: 1, architect: 0 },
                medium: { base: 7, ml: 3, data: 2, dev: 2, qa: 1, devops: 1, pm: 1, architect: 1 },
                high: { base: 9, ml: 3, data: 2, dev: 2, qa: 1, devops: 1, pm: 1, architect: 1 },
                veryHigh: { base: 11, ml: 4, data: 2, dev: 2, qa: 2, devops: 1, pm: 1, architect: 1 }
            },
            pilot: {
                low: { base: 6, ml: 2, data: 2, dev: 2, qa: 1, devops: 1, pm: 1, architect: 1 },
                medium: { base: 9, ml: 3, data: 2, dev: 3, qa: 2, devops: 1, pm: 1, architect: 1 },
                high: { base: 12, ml: 4, data: 3, dev: 3, qa: 2, devops: 1, pm: 1, architect: 1 },
                veryHigh: { base: 15, ml: 5, data: 3, dev: 4, qa: 2, devops: 1, pm: 1, architect: 1 }
            },
            production: {
                low: { base: 8, ml: 3, data: 2, dev: 3, qa: 2, devops: 1, pm: 1, architect: 1 },
                medium: { base: 12, ml: 4, data: 3, dev: 4, qa: 2, devops: 2, pm: 1, architect: 1 },
                high: { base: 16, ml: 5, data: 4, dev: 5, qa: 3, devops: 2, pm: 1, architect: 1 },
                veryHigh: { base: 20, ml: 6, data: 4, dev: 6, qa: 3, devops: 2, pm: 1, architect: 1 }
            },
            enterprise: {
                low: { base: 12, ml: 4, data: 3, dev: 5, qa: 3, devops: 2, pm: 1, architect: 1 },
                medium: { base: 18, ml: 6, data: 4, dev: 7, qa: 4, devops: 2, pm: 2, architect: 2 },
                high: { base: 25, ml: 8, data: 5, dev: 9, qa: 5, devops: 3, pm: 2, architect: 2 },
                veryHigh: { base: 32, ml: 10, data: 6, dev: 11, qa: 6, devops: 3, pm: 2, architect: 2 }
            }
        };

        // Role definitions with skills and descriptions
        const roleDefinitions = {
            pm: {
                title: 'Product Manager / Project Lead',
                description: 'Oversees project delivery, stakeholder management, and business alignment',
                skills: ['Agile', 'Stakeholder Mgmt', 'AI Strategy', 'Risk Management']
            },
            architect: {
                title: 'Solution Architect',
                description: 'Designs overall system architecture, integration patterns, and technology stack',
                skills: ['Azure/AWS', 'System Design', 'ML Architecture', 'Security']
            },
            ml: {
                title: 'ML Engineer / Data Scientist',
                description: 'Develops ML models, experiments with algorithms, and optimizes performance',
                skills: ['Python', 'PyTorch/TensorFlow', 'ML Algorithms', 'Feature Engineering']
            },
            data: {
                title: 'Data Engineer',
                description: 'Builds data pipelines, manages data quality, and handles data infrastructure',
                skills: ['SQL', 'Spark/Databricks', 'ETL', 'Data Modeling']
            },
            dev: {
                title: 'Software Engineer',
                description: 'Develops application code, APIs, integrations, and user interfaces',
                skills: ['Full Stack', 'APIs', 'React/Angular', 'Microservices']
            },
            qa: {
                title: 'QA Engineer',
                description: 'Tests ML models and applications, ensures quality and reliability',
                skills: ['Test Automation', 'ML Testing', 'Performance Testing', 'CI/CD']
            },
            devops: {
                title: 'MLOps / DevOps Engineer',
                description: 'Manages deployments, monitoring, CI/CD, and infrastructure',
                skills: ['Docker/Kubernetes', 'Azure DevOps', 'Monitoring', 'IaC']
            }
        };

        function updateDefaults() {
            // Could add logic to auto-adjust other fields based on phase/complexity
        }

        function toggleAllocations() {
            const checkbox = document.getElementById('customAllocations');
            const controls = document.getElementById('allocationControls');
            controls.style.display = checkbox.checked ? 'block' : 'none';
        }

        // Setup allocation sliders
        document.addEventListener('DOMContentLoaded', function() {
            const sliders = [
                { slider: 'pmAllocation', display: 'pmAllocationValue' },
                { slider: 'architectAllocation', display: 'architectAllocationValue' },
                { slider: 'mlAllocation', display: 'mlAllocationValue' },
                { slider: 'dataAllocation', display: 'dataAllocationValue' },
                { slider: 'devAllocation', display: 'devAllocationValue' },
                { slider: 'qaAllocation', display: 'qaAllocationValue' },
                { slider: 'devopsAllocation', display: 'devopsAllocationValue' }
            ];

            sliders.forEach(item => {
                const slider = document.getElementById(item.slider);
                const display = document.getElementById(item.display);
                if (slider && display) {
                    slider.addEventListener('input', function() {
                        display.textContent = this.value;
                    });
                }
            });
        });

        function calculateTeam() {
            // Get inputs
            const projectName = document.getElementById('projectName').value || 'AI Project';
            const industry = document.getElementById('industry').value;
            const aiMaturity = document.getElementById('aiMaturity').value;
            const phase = document.getElementById('projectPhase').value;
            const complexity = document.getElementById('projectComplexity').value;
            const duration = parseInt(document.getElementById('projectDuration').value);
            const teamModel = document.getElementById('teamModel').value;
            const includeDataTeam = document.getElementById('includeDataTeam').checked;
            const includeMLOps = document.getElementById('includeMLOps').checked;
            const avgRate = parseInt(document.getElementById('avgRate').value);
            const customAllocations = document.getElementById('customAllocations').checked;

            // Get custom allocation percentages
            const allocations = {
                pm: customAllocations ? parseInt(document.getElementById('pmAllocation').value) / 100 : 1.0,
                architect: customAllocations ? parseInt(document.getElementById('architectAllocation').value) / 100 : 1.0,
                ml: customAllocations ? parseInt(document.getElementById('mlAllocation').value) / 100 : 1.0,
                data: customAllocations ? parseInt(document.getElementById('dataAllocation').value) / 100 : 1.0,
                dev: customAllocations ? parseInt(document.getElementById('devAllocation').value) / 100 : 1.0,
                qa: customAllocations ? parseInt(document.getElementById('qaAllocation').value) / 100 : 1.0,
                devops: customAllocations ? parseInt(document.getElementById('devopsAllocation').value) / 100 : 1.0
            };

            // Get maturity impact
            const maturityData = maturityImpact[aiMaturity];
            const maturityMultiplier = maturityData.multiplier;

            // Get team template
            const template = teamTemplates[phase][complexity];
            
            // Calculate team composition
            let roles = [];
            let totalFTE = 0;

            // Always include PM
            if (template.pm > 0) {
                const baseFTE = template.pm * allocations.pm;
                const adjustedFTE = baseFTE * maturityMultiplier;
                roles.push({
                    ...roleDefinitions.pm,
                    count: template.pm,
                    fte: adjustedFTE,
                    allocation: allocations.pm
                });
                totalFTE += adjustedFTE;
            }

            // Include architect for larger projects
            if (template.architect > 0) {
                const baseFTE = template.architect * allocations.architect;
                const adjustedFTE = baseFTE * maturityMultiplier;
                roles.push({
                    ...roleDefinitions.architect,
                    count: template.architect,
                    fte: adjustedFTE,
                    allocation: allocations.architect
                });
                totalFTE += adjustedFTE;
            }

            // ML Engineers
            if (template.ml > 0) {
                const baseFTE = template.ml * allocations.ml;
                const adjustedFTE = baseFTE * maturityMultiplier;
                roles.push({
                    ...roleDefinitions.ml,
                    count: template.ml,
                    fte: adjustedFTE,
                    allocation: allocations.ml
                });
                totalFTE += adjustedFTE;
            }

            // Data Engineers (optional)
            if (includeDataTeam && template.data > 0) {
                const baseFTE = template.data * allocations.data;
                const adjustedFTE = baseFTE * maturityMultiplier;
                roles.push({
                    ...roleDefinitions.data,
                    count: template.data,
                    fte: adjustedFTE,
                    allocation: allocations.data
                });
                totalFTE += adjustedFTE;
            }

            // Software Engineers
            if (template.dev > 0) {
                const baseFTE = template.dev * allocations.dev;
                const adjustedFTE = baseFTE * maturityMultiplier;
                roles.push({
                    ...roleDefinitions.dev,
                    count: template.dev,
                    fte: adjustedFTE,
                    allocation: allocations.dev
                });
                totalFTE += adjustedFTE;
            }

            // QA Engineers
            if (template.qa > 0) {
                const baseFTE = template.qa * allocations.qa;
                const adjustedFTE = baseFTE * maturityMultiplier;
                roles.push({
                    ...roleDefinitions.qa,
                    count: template.qa,
                    fte: adjustedFTE,
                    allocation: allocations.qa
                });
                totalFTE += adjustedFTE;
            }

            // DevOps/MLOps (optional)
            if (includeMLOps && template.devops > 0) {
                const baseFTE = template.devops * allocations.devops;
                const adjustedFTE = baseFTE * maturityMultiplier;
                roles.push({
                    ...roleDefinitions.devops,
                    count: template.devops,
                    fte: adjustedFTE,
                    allocation: allocations.devops
                });
                totalFTE += adjustedFTE;
            }

            // Add AI maturity support roles for initial/developing organizations
            if (aiMaturity === 'initial' || aiMaturity === 'developing') {
                roles.push({
                    title: 'AI Champion / Change Management',
                    description: 'Drives adoption, training, and organizational change',
                    skills: ['Change Mgmt', 'Training', 'AI Strategy', 'Communication'],
                    count: 1,
                    fte: 0.5,
                    allocation: 0.5
                });
                totalFTE += 0.5;
            }

            // Adjust for team model
            const modelMultipliers = {
                dedicated: 1.0,
                hybrid: 1.15,
                parttime: 1.3
            };
            const adjustedFTE = totalFTE * modelMultipliers[teamModel];

            // Calculate costs
            const workingDaysPerMonth = 20;
            const totalDays = duration * workingDaysPerMonth;
            const totalCost = adjustedFTE * avgRate * totalDays;
            const monthlyCost = totalCost / duration;

            // Display results
            document.getElementById('totalTeam').textContent = `${Math.round(adjustedFTE)} FTE`;
            const maturityNote = maturityMultiplier !== 1.0 ? ` (${Math.round((maturityMultiplier - 1) * 100)}% for maturity)` : '';
            document.getElementById('teamSubtext').textContent = `${roles.length} distinct roles${maturityNote}`;

            document.getElementById('totalBudget').textContent = `$${(totalCost / 1000000).toFixed(2)}M`;
            document.getElementById('budgetSubtext').textContent = `$${Math.round(monthlyCost / 1000)}K per month`;

            // Display team breakdown
            const teamBreakdownDiv = document.getElementById('teamBreakdown');
            teamBreakdownDiv.style.display = 'block';
            teamBreakdownDiv.innerHTML = '<h3>Team Breakdown by Role</h3>';

            roles.forEach(role => {
                const roleCard = document.createElement('div');
                roleCard.className = 'role-card';
                const allocationText = role.allocation < 1.0 ? ` @ ${Math.round(role.allocation * 100)}%` : '';
                const fteDisplay = role.fte.toFixed(2);
                roleCard.innerHTML = `
                    <div class="role-header">
                        <div class="role-title">${role.title}</div>
                        <div class="role-count">${fteDisplay} FTE${allocationText}</div>
                    </div>
                    <div class="role-details">${role.description}</div>
                    <div class="role-skills">
                        ${role.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                    </div>
                `;
                teamBreakdownDiv.appendChild(roleCard);
            });

            // Display recommendations
            const recommendations = generateRecommendations(phase, complexity, totalFTE, duration, teamModel, aiMaturity, industry);
            const recommendationsDiv = document.getElementById('recommendations');
            recommendationsDiv.style.display = 'block';
            const recList = document.getElementById('recommendationsList');
            recList.innerHTML = recommendations.map(rec => `<li>${rec}</li>`).join('');

            // Display cost breakdown
            const costBreakdownDiv = document.getElementById('costBreakdown');
            costBreakdownDiv.style.display = 'block';
            
            const roleCosts = roles.map(role => ({
                name: role.title,
                cost: role.fte * avgRate * totalDays
            }));

            costBreakdownDiv.innerHTML = '<h3>üí∞ Cost Breakdown</h3>';
            roleCosts.forEach(item => {
                const costItem = document.createElement('div');
                costItem.className = 'cost-item';
                costItem.innerHTML = `
                    <span>${item.name}</span>
                    <span>$${Math.round(item.cost / 1000)}K</span>
                `;
                costBreakdownDiv.appendChild(costItem);
            });

            // Total
            const totalItem = document.createElement('div');
            totalItem.className = 'cost-item';
            totalItem.innerHTML = `
                <span>Total Project Cost</span>
                <span>$${(totalCost / 1000000).toFixed(2)}M</span>
            `;
            costBreakdownDiv.appendChild(totalItem);

            // Show export buttons
            document.getElementById('exportButtons').style.display = 'flex';

            // Store data for export
            window.teamData = {
                projectName,
                inputs: {
                    industry,
                    aiMaturity,
                    maturityImpact: maturityData.description,
                    phase,
                    complexity,
                    duration,
                    teamModel,
                    avgRate,
                    includeDataTeam,
                    includeMLOps
                },
                results: {
                    totalFTE: Math.round(adjustedFTE),
                    roleCount: roles.length,
                    totalCost,
                    monthlyCost,
                    totalDays,
                    maturityMultiplier
                },
                roles: roles.map(r => ({
                    title: r.title,
                    count: r.count,
                    fte: r.fte,
                    allocation: r.allocation ? Math.round(r.allocation * 100) + '%' : '100%',
                    skills: r.skills
                })),
                costs: roleCosts,
                recommendations
            };
        }

        function generateRecommendations(phase, complexity, teamSize, duration, teamModel, aiMaturity, industry) {
            const recs = [];

            // Add maturity-specific recommendations
            if (window.maturityContext && window.maturityContext.recommendations) {
                recs.push(...window.maturityContext.recommendations);
            }

            // Industry-specific recommendations
            const industryRecs = {
                financial: [
                    'Ensure compliance expertise (GDPR, SOC2, PCI-DSS) for financial services',
                    'Plan for extensive security reviews and audit trails',
                    'Consider regulatory approval timeline (add 3-6 months for production)'
                ],
                retail: [
                    'Plan for high scalability - retail AI can go from 1K to 1M users quickly',
                    'Include A/B testing framework for personalization features',
                    'Consider seasonal demand fluctuations in planning'
                ],
                energy: [
                    'Include domain experts (geologists, engineers) in the team',
                    'Plan for IoT/sensor data integration complexity',
                    'Consider harsh environment deployment requirements'
                ],
                defense: [
                    'Include cleared personnel with appropriate security levels',
                    'Plan for air-gapped or restricted environment deployment',
                    'Add 30-50% timeline for security certifications',
                    'Consider redundancy and high-availability requirements'
                ],
                public: [
                    'Plan for accessibility compliance (WCAG 2.1 AA minimum)',
                    'Include multilingual support in scope',
                    'Consider lengthy procurement and approval processes',
                    'Plan for transparency and explainability requirements'
                ]
            };

            if (industry && industryRecs[industry]) {
                recs.push(...industryRecs[industry].slice(0, 2)); // Add top 2 industry recs
            }

            // Phase-specific recommendations
            if (phase === 'discovery' || phase === 'mvp') {
                recs.push('Start with a smaller core team and scale up as requirements solidify');
                recs.push('Focus on rapid prototyping and quick wins to build momentum');
            }

            // Complexity recommendations
            if (complexity === 'high' || complexity === 'veryHigh') {
                recs.push('Consider hiring senior/lead level engineers given project complexity');
                recs.push('Plan for dedicated architect role from day one');
                recs.push('Allocate 20% of ML engineering time for experimentation and R&D');
            }

            // Team size recommendations
            if (teamSize > 10) {
                recs.push('Consider splitting into multiple squads (e.g., ML squad, platform squad)');
                recs.push('Ensure strong PM/technical lead to coordinate across teams');
                recs.push('Implement clear communication protocols (daily standups, weekly demos)');
            } else if (teamSize < 5) {
                recs.push('Small team - ensure broad skillsets and T-shaped team members');
            }

            // Team model recommendations
            if (teamModel === 'parttime') {
                recs.push('Part-time model may increase coordination overhead - factor in additional 15-20% time');
                recs.push('Use async communication tools effectively (wikis, recorded demos)');
            }

            // Duration recommendations
            if (duration > 12) {
                recs.push('Long timeline - consider phased delivery with milestones every 3 months');
                recs.push('Plan for team rotation and knowledge transfer to prevent burnout');
                recs.push('Re-validate use case and business value at 6-month intervals');
            } else if (duration < 4) {
                recs.push('Short timeline - focus ruthlessly on MVP scope');
                recs.push('Prefer pre-trained models and existing platforms over custom development');
            }

            // General best practices
            recs.push('Include buffer for ramp-up time (typically 2-4 weeks per new team member)');
            recs.push('Plan for model retraining and drift monitoring from day one');
            
            // Cost optimization for mature organizations
            if (aiMaturity === 'managed' || aiMaturity === 'optimizing') {
                recs.push('Leverage existing AI platform and reusable components to reduce costs');
                recs.push('Consider offshore/nearshore mix to optimize team cost (40-60% savings)');
            }

            return recs;
        }

        function exportToJSON() {
            const dataStr = JSON.stringify(window.teamData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `team-sizing-${window.teamData.projectName.replace(/\s+/g, '-')}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        function copyToClipboard() {
            const data = window.teamData;
            const industryText = data.inputs.industry ? `\n- Industry: ${data.inputs.industry}` : '';
            const maturityText = data.inputs.aiMaturity ? `\n- AI Maturity: ${data.inputs.aiMaturity} (${data.inputs.maturityImpact})` : '';
            const maturityMultiplierText = data.results.maturityMultiplier !== 1.0 ? `\n- Maturity Adjustment: ${Math.round((data.results.maturityMultiplier - 1) * 100)}%` : '';
            
            const summary = `
TEAM SIZING: ${data.projectName}

INPUTS:${industryText}${maturityText}
- Phase: ${data.inputs.phase}
- Complexity: ${data.inputs.complexity}
- Duration: ${data.inputs.duration} months
- Team Model: ${data.inputs.teamModel}
- Average Rate: $${data.inputs.avgRate}/day

RESULTS:
- Total Team Size: ${data.results.totalFTE} FTE${maturityMultiplierText}
- Number of Roles: ${data.results.roleCount}
- Total Project Cost: $${(data.results.totalCost / 1000000).toFixed(2)}M
- Monthly Burn Rate: $${Math.round(data.results.monthlyCost / 1000)}K

TEAM COMPOSITION:
${data.roles.map(r => `- ${r.title}: ${r.fte.toFixed(2)} FTE (${r.allocation})
  Skills: ${r.skills.join(', ')}`).join('\n')}

COST BREAKDOWN:
${data.costs.map(c => `- ${c.name}: $${Math.round(c.cost / 1000)}K`).join('\n')}

RECOMMENDATIONS:
${data.recommendations.map((r, idx) => `${idx + 1}. ${r}`).join('\n')}
            `.trim();

            navigator.clipboard.writeText(summary).then(() => {
                alert('‚úÖ Summary copied to clipboard!');
            });
        }
    </script>
</body>
</html>
